<div class="announcement">
  <span class="pill">{{ site.data.site.announcement.pill }}</span>
  <span>{{ site.data.site.announcement.text }}</span>
</div>

<header class="site-header">
  <nav class="nav">
    <a class="brand" href="{{ '/' | relative_url }}" aria-label="{{ site.data.site.brand.name }} Home">
      <img src="{{ '/assets/logo.svg' | relative_url }}" alt="{{ site.data.site.brand.name }}" />
      <span>
        <strong>{{ site.data.site.brand.name }}</strong>
        <em>{{ site.data.site.brand.subtitle }}</em>
      </span>
    </a>
    <div class="nav-links" id="site-links">
      {% assign current_url = page.url | default: "/" %}
      {% for item in site.data.navigation %}
        {% assign href = item.href | default: "" %}
        {% assign href_first = href | slice: 0, 1 %}
        {% assign href_base = href | split: "#" | first %}
        {% assign is_anchor = href contains "#" %}
        {% assign is_external = href contains "http://" or href contains "https://" or href contains "mailto:" %}
        {% assign is_active = false %}
        {% if is_external == false and is_anchor == false and href_base == current_url %}
          {% assign is_active = true %}
        {% endif %}
        {% if item.cta %}
          {% if is_external %}
            <a class="nav-cta" href="{{ href }}">{{ item.label }}</a>
          {% elsif href_first == "#" %}
            <a class="nav-cta" href="{{ href }}">{{ item.label }}</a>
          {% else %}
            <a class="nav-cta" href="{{ href | relative_url }}">{{ item.label }}</a>
          {% endif %}
        {% else %}
          {% assign active_class = "" %}
          {% if is_active %}
            {% assign active_class = "is-active" %}
          {% endif %}
          {% if is_external %}
            <a class="{{ active_class }}" href="{{ href }}">{{ item.label }}</a>
          {% elsif href_first == "#" %}
            <a class="{{ active_class }}" href="{{ href }}">{{ item.label }}</a>
          {% else %}
            <a class="{{ active_class }}" href="{{ href | relative_url }}">{{ item.label }}</a>
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>
    <div class="nav-actions">
      <button class="nav-search" type="button" data-search-open aria-label="Search site">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <circle cx="11" cy="11" r="7"></circle>
          <path d="M20 20l-3.5-3.5"></path>
        </svg>
      </button>
      <button class="nav-toggle" type="button" aria-expanded="false" aria-controls="site-links" aria-label="Toggle navigation">
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>
</header>
